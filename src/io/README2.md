# Java의 `java.io` 

패키지는 입출력(I/O) 작업을 수행하는 데 필요한 핵심 클래스와 인터페이스를 제공합니다. 이 패키지는 파일, 콘솔, 메모리, 네트워크 등 다양한 데이터 소스 및 대상과의 읽기/쓰기 작업을 지원하며, 데이터 단위를 기준으로 **바이트 스트림**과 **문자 스트림**으로 크게 나뉩니다.

---

### 1. 스트림의 기본 개념

* **스트림(Stream):** 데이터가 흐르는 통로의 개념입니다. 데이터를 한 방향으로 연속적으로 읽고 쓰는 데 사용됩니다.
* **입력 스트림(Input Stream):** 데이터 소스로부터 프로그램으로 데이터를 읽어 들이는 스트림입니다.
* **출력 스트림(Output Stream):** 프로그램에서 데이터 대상으로 데이터를 내보내는 스트림입니다.

---

### 2. 바이트 스트림 (Byte Streams)

바이트 스트림은 1바이트 단위로 데이터를 읽고 씁니다. 주로 **바이너리(이진) 데이터** 처리(이미지, 오디오, 비디오 파일 등)에 사용됩니다.

#### 2.1. 바이트 출력 스트림: `OutputStream`

* 바이트 기반 출력 스트림의 **최상위 추상 클래스**입니다.
* 모든 바이트 기반 출력 스트림 클래스는 `OutputStream`을 상속받아 만들어집니다.
* **주요 메소드:**
    * `void write(int b)`: 1바이트를 출력합니다. (정수 `b`의 하위 1바이트만 사용)
    * `void write(byte[] b)`: 배열 `b`의 모든 바이트를 출력합니다.
    * `void write(byte[] b, int off, int len)`: 배열 `b`의 `off` 위치부터 `len` 길이만큼의 바이트를 출력합니다.
    * `void flush()`: 버퍼에 남아있는 모든 데이터를 강제로 출력 대상에 보냅니다. (버퍼링 스트림에 주로 사용)
    * `void close()`: 스트림을 닫고 사용 중이던 시스템 자원을 해제합니다. (필수!)

* **주요 상속 클래스:**
    * `FileOutputStream`: 파일에 바이트 데이터를 씁니다.
    * `PrintStream`: 다양한 데이터 타입을 바이트 형태로 출력하며, `print()`, `println()` 메소드를 제공합니다. (`System.out`의 타입)
    * `BufferedOutputStream`: 출력 효율을 높이기 위해 버퍼링 기능을 추가한 스트림입니다.
    * `DataOutputStream`: 자바의 기본 데이터 타입(int, double, boolean 등)을 바이트 스트림으로 변환하여 쓸 수 있는 필터 스트림입니다.

#### 2.2. 바이트 입력 스트림: `InputStream`

* 바이트 기반 입력 스트림의 **최상위 추상 클래스**입니다.
* 모든 바이트 기반 입력 스트림 클래스는 `InputStream`을 상속받아 만들어집니다.
* **주요 메소드:**
    * `int read()`: 1바이트를 읽어 정수(0-255)로 반환합니다. 스트림의 끝(EOF)에 도달하면 `-1`을 반환합니다.
    * `int read(byte[] b)`: 배열 `b`의 크기만큼 바이트를 읽어 배열에 저장하고, 읽은 바이트 수를 반환합니다. EOF에 도달하면 `-1`을 반환합니다.
    * `int read(byte[] b, int off, int len)`: 배열 `b`의 `off` 위치부터 `len` 길이만큼 바이트를 읽어 저장하고, 읽은 바이트 수를 반환합니다.
    * `void close()`: 스트림을 닫고 사용 중이던 시스템 자원을 해제합니다. (필수!)

* **주요 상속 클래스:**
    * `FileInputStream`: 파일에서 바이트 데이터를 읽습니다.
    * `BufferedInputStream`: 입력 효율을 높이기 위해 버퍼링 기능을 추가한 스트림입니다.
    * `DataInputStream`: 바이트 스트림에서 자바의 기본 데이터 타입을 읽을 수 있는 필터 스트림입니다.

---

### 3. 문자 스트림 (Character Streams)

문자 스트림은 2바이트(유니코드 문자) 단위로 데이터를 읽고 씁니다. 주로 **텍스트 데이터** 처리(텍스트 파일, 콘솔 입출력 등)에 사용됩니다.

#### 3.1. 문자 출력 스트림: `Writer`

* 문자 기반 출력 스트림의 **최상위 추상 클래스**입니다.
* **주요 메소드:** `write()`, `flush()`, `close()` (바이트 스트림과 유사한 개념으로 문자 단위 처리).

* **주요 상속 클래스:**
    * `FileWriter`: 파일에 문자 데이터를 씁니다.
    * `BufferedWriter`: 출력 효율을 높이기 위해 버퍼링 기능을 추가한 문자 스트림입니다.
    * `PrintWriter`: `PrintStream`처럼 `print()`, `println()` 메소드를 제공하며, 다양한 형식의 출력을 지원하는 문자 스트림입니다.

#### 3.2. 문자 입력 스트림: `Reader`

* 문자 기반 입력 스트림의 **최상위 추상 클래스**입니다.
* **주요 메소드:** `read()`, `close()` (바이트 스트림과 유사한 개념으로 문자 단위 처리).

* **주요 상속 클래스:**
    * `FileReader`: 파일에서 문자 데이터를 읽습니다.
    * `BufferedReader`: 입력 효율을 높이기 위해 버퍼링 기능을 추가한 문자 스트림입니다. `readLine()` 메소드를 통해 한 줄씩 읽는 기능을 제공합니다.

---

### 4. `java.io`의 주요 구성요소 및 용도별 분류

`java.io` 패키지는 다양한 I/O 작업을 위해 다음과 같은 클래스들을 제공합니다.

---

#### 📁 4.1. 파일 입출력 관련 클래스

| 클래스           | 설명                                                                                                                              |
| :--------------- | :-------------------------------------------------------------------------------------------------------------------------------- |
| `File`           | 실제 파일이나 디렉토리(폴더)를 나타내는 클래스입니다. 파일/디렉토리의 생성, 삭제, 이름 변경, 존재 여부 확인 등 **메타 정보 및 관리**에 사용됩니다. |
| `FileReader`     | **문자 기반**으로 파일을 읽는 스트림입니다. 주로 **텍스트 파일**을 읽을 때 사용합니다.                                            |
| `FileWriter`     | **문자 기반**으로 파일에 쓰는 스트림입니다. 주로 **텍스트 파일**에 쓸 때 사용합니다.                                              |
| `FileInputStream`  | **바이트 기반**으로 파일을 읽는 스트림입니다. **이미지, 동영상 등 바이너리 파일**을 읽을 때 사용합니다.                         |
| `FileOutputStream` | **바이트 기반**으로 파일에 쓰는 스트림입니다. **이미지, 동영상 등 바이너리 파일**을 쓸 때 사용합니다.                           |

---

#### 📜 4.2. 문자(Char) 스트림 (텍스트 입출력)

| 클래스          | 설명                                                                   |
| :-------------- | :--------------------------------------------------------------------- |
| `Reader`        | 모든 문자 입력 스트림의 **최상위 추상 클래스**입니다.                   |
| `Writer`        | 모든 문자 출력 스트림의 **최상위 추상 클래스**입니다.                   |
| `BufferedReader`  | 입력을 효율적으로 처리하기 위해 **버퍼링된 문자 입력 스트림**입니다. `readLine()`으로 한 줄씩 읽기 편리합니다. |
| `BufferedWriter`  | 출력 효율을 높이기 위한 **버퍼링된 문자 출력 스트림**입니다.            |
| `PrintWriter`     | 다양한 형식의 출력(예: `print()`, `println()`, `format()`)을 지원하는 **문자 출력 스트림**입니다. |

---

#### 📦 4.3. 바이트(Byte) 스트림 (바이너리 입출력)

| 클래스             | 설명                                                                   |
| :----------------- | :--------------------------------------------------------------------- |
| `InputStream`      | 모든 바이트 입력 스트림의 **최상위 추상 클래스**입니다.                 |
| `OutputStream`     | 모든 바이트 출력 스트림의 **최상위 추상 클래스**입니다.                 |
| `BufferedInputStream` | 바이트 입력을 효율적으로 처리하는 **버퍼링된 바이트 입력 스트림**입니다. |
| `BufferedOutputStream` | 바이트 출력을 효율적으로 처리하는 **버퍼링된 바이트 출력 스트림**입니다. |
| `DataInputStream`  | 바이트 스트림에서 **자바의 기본 데이터 타입(int, double 등)**을 읽을 수 있는 보조 스트림입니다. |
| `DataOutputStream` | 바이트 스트림에 **자바의 기본 데이터 타입**을 쓸 수 있는 보조 스트림입니다. |
| `ObjectInputStream` | 직렬화된 **객체를 파일에서 읽어오는** 데 사용되는 보조 스트림입니다.     |
| `ObjectOutputStream` | **객체를 직렬화하여 파일로 저장하는** 데 사용되는 보조 스트림입니다.       |

---

#### 💬 4.4. 콘솔 입출력 관련 클래스

| 클래스             | 설명                                                                                               |
| :----------------- | :------------------------------------------------------------------------------------------------- |
| `InputStreamReader`  | **바이트 스트림을 문자 스트림으로 변환**합니다. `System.in`(바이트 스트림)을 문자 스트림으로 읽을 때 사용됩니다. |
| `OutputStreamWriter` | **문자 스트림을 바이트 스트림으로 변환**합니다.                                                    |
| `Console`          | 콘솔을 통해 사용자 입력을 읽고 출력할 수 있습니다. 특히 **비밀번호 같은 민감한 정보 입력**에 유리합니다. |

---

#### 💾 4.5. 객체 직렬화 관련 클래스

| 클래스                    | 설명                                                                  |
| :------------------------ | :-------------------------------------------------------------------- |
| `Serializable` (인터페이스) | 객체를 바이트 스트림으로 변환(직렬화)하거나 바이트 스트림에서 객체로 복원(역직렬화)할 수 있도록 표시하는 **마커 인터페이스**입니다. |
| `ObjectInputStream`       | 직렬화된 객체를 파일/스트림에서 읽어 객체로 복원합니다.                |
| `ObjectOutputStream`      | 객체를 직렬화하여 파일/스트림으로 저장합니다.                          |

---

#### 🧵 4.6. 기타 보조 클래스

| 클래스                  | 설명                                                                      |
| :---------------------- | :------------------------------------------------------------------------ |
| `PushbackReader`        | 문자 스트림을 읽다가 **다시 스트림으로 문자를 밀어넣을 수 있는**(`unread()`) `BufferedReader`의 확장입니다. |
| `LineNumberReader`      | 읽은 **라인 번호를 추적할 수 있는** `BufferedReader`의 확장입니다.        |
| `PipedInputStream`      | 두 스레드 간에 **데이터 파이프라인을 생성**하는 데 사용됩니다. (`PipedOutputStream`과 함께 한 스레드가 쓰고 다른 스레드가 읽음) |
| `PipedOutputStream`     | `PipedInputStream`과 연결되어 데이터를 쓸 수 있는 파이프 스트림입니다.  |

---

### 5. `try-with-resources` 문 (자원 자동 해제)

자바 I/O 스트림은 사용 후 반드시 `close()` 메소드를 호출하여 시스템 자원을 해제해야 합니다. 이를 간편하고 안전하게 처리하기 위해 자바 7부터 **`try-with-resources`** 문이 도입되었습니다.

```java
try (BufferedReader reader = new BufferedReader(new FileReader("example.txt"))) {
    String line;
    while ((line = reader.readLine()) != null) {
        System.out.println(line);
    }
} catch (IOException e) {
    e.printStackTrace();
}
// reader.close()를 명시적으로 호출할 필요가 없음. try 블록이 끝나면 자동으로 닫힙니다.
```

---

### 6. 파일 읽기/쓰기 예시: `java.io` vs `java.nio.file`

파일 입출력은 `java.io` 패키지를 통해 가능하지만, 자바 7부터 도입된 `java.nio.file` 패키지는 더 현대적이고 편리한 API를 제공하여 파일 및 경로 작업을 보다 효율적으로 처리할 수 있게 합니다.

#### 💡 예시: 가장 일반적인 파일 읽기 방법 2가지

1.  **`BufferedReader` + `FileReader` (Java.io 전통 방식)**
    * 문자 기반으로 파일을 한 줄씩 읽는 데 효율적입니다.
    * **코드:**
        ```java
        import java.io.BufferedReader;
        import java.io.FileReader;
        import java.io.IOException;

        // try-with-resources를 사용하여 close() 자동 처리
        try (BufferedReader reader = new BufferedReader(new FileReader("example.txt"))) {
            String line;
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
        } catch (IOException e) {
            System.err.println("파일 읽기 오류: " + e.getMessage());
        }
        ```

2.  **`Files.readAllLines()` (Java.nio.file 현대적 방식)**
    * 파일의 모든 라인을 `List<String>`으로 한 번에 읽어 메모리에 로드합니다. 작은 파일에 편리합니다.
    * **코드:**
        ```java
        import java.io.IOException;
        import java.nio.file.Files;
        import java.nio.file.Paths;
        import java.util.List;

        try {
            List<String> lines = Files.readAllLines(Paths.get("example.txt"));
            lines.forEach(System.out::println);
        } catch (IOException e) {
            System.err.println("파일 읽기 오류: " + e.getMessage());
        }
        ```
    * `java.nio.file`는 `Files`, `Paths` 클래스 등을 통해 `java.io`보다 더 간결하고 강력한 파일 시스템 접근 기능을 제공합니다.

---

`java.io` 패키지는 자바의 기본적인 입출력 작업을 이해하는 데 매우 중요하며, `java.nio.file`와 함께 사용되어 더욱 유연하고 강력한 파일 및 스트림 처리 기능을 제공합니다.